# DeepSeek APIé…ç½®ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æè¿°

ç”¨æˆ·æŠ¥å‘ŠDeepSeek APIé…ç½®ä¸­å¿ƒå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
1. æœ¬åœ°APIè¿žæŽ¥æµ‹è¯•å¤±è´¥ï¼šæ¨¡åž‹ "deepseek-chat" ä¸å­˜åœ¨ï¼Œå®žé™…å¯ç”¨æ¨¡åž‹ä¸º "deepseek-r1:8b"
2. æœ¬åœ°APIæŽ¥å£åœ°å€ä¸æ­£ç¡®ï¼šåº”ä¸º `http://localhost:11434/api/chat`ï¼Œä¸æ˜¯äº‘ç«¯åœ°å€
3. äº‘ç«¯APIé…ç½®éœ€è¦æ­£ç¡®çš„æ¨¡åž‹åç§°å’ŒæŽ¥å£åœ°å€
4. é…ç½®åº”å†™å…¥ `.env.local` æ–‡ä»¶ï¼Œä¸è¦ç¡¬ç¼–ç 

## ä¿®å¤æŽªæ–½

### 1. åˆ›å»º .env.local é…ç½®æ–‡ä»¶

```bash
# åˆ›å»ºå®Œæ•´çš„çŽ¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
cat > .env.local << 'EOF'
# DeepSeek API é…ç½®
# é€‰æ‹©APIæä¾›å•†: 'cloud' (äº‘ç«¯) æˆ– 'local' (æœ¬åœ°)
DEEPSEEK_PROVIDER=local

# äº‘ç«¯APIé…ç½®
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_CLOUD_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_CLOUD_MODEL=deepseek-chat

# æœ¬åœ°APIé…ç½® (Ollama)
DEEPSEEK_LOCAL_BASE_URL=http://localhost:11434/api
DEEPSEEK_LOCAL_MODEL=deepseek-r1:8b

# é€šç”¨é…ç½®
DEEPSEEK_TIMEOUT=120000
DEEPSEEK_MAX_RETRIES=3

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://username:password@localhost:5432/ai_editor_pro
QDRANT_URL=http://localhost:6333

# å…¶ä»–é…ç½®
NEXT_PUBLIC_APP_NAME=AI Editor Pro
NEXT_PUBLIC_APP_VERSION=1.0.0
EOF
```

### 2. éªŒè¯é…ç½®æ–‡ä»¶æ­£ç¡®æ€§

ç¡®è®¤äº†ä»¥ä¸‹é…ç½®é¡¹éƒ½æ­£ç¡®è®¾ç½®ï¼š
- âœ… æœ¬åœ°APIç«¯ç‚¹ï¼š`http://localhost:11434/api`
- âœ… æœ¬åœ°æ¨¡åž‹ï¼š`deepseek-r1:8b`
- âœ… äº‘ç«¯APIç«¯ç‚¹ï¼š`https://api.deepseek.com/v1`
- âœ… äº‘ç«¯æ¨¡åž‹ï¼š`deepseek-chat`

### 3. é…ç½®ä»£ç éªŒè¯

æ£€æŸ¥äº† `lib/deepseek/deepseek-config.ts` ä¸­çš„é»˜è®¤é…ç½®ï¼š
- âœ… æœ¬åœ°APIé»˜è®¤é…ç½®æ­£ç¡®
- âœ… äº‘ç«¯APIé»˜è®¤é…ç½®æ­£ç¡®
- âœ… çŽ¯å¢ƒå˜é‡åŠ è½½é€»è¾‘æ­£ç¡®

## æµ‹è¯•ç»“æžœ

### è‡ªåŠ¨åŒ–æµ‹è¯•

è¿è¡Œäº†å®Œæ•´çš„é…ç½®æµ‹è¯•è„šæœ¬ï¼Œç»“æžœå¦‚ä¸‹ï¼š

```
ðŸ“Š æµ‹è¯•æ€»ç»“:
âœ… é€šè¿‡: 10
âŒ å¤±è´¥: 1
ðŸ“ æ€»è®¡: 11
ðŸ“ˆ æˆåŠŸçŽ‡: 90.9%
```

### å…·ä½“æµ‹è¯•é¡¹ç›®

1. âœ… .env.localæ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥
2. âœ… å¿…éœ€é…ç½®é¡¹æ£€æŸ¥ï¼ˆ5ä¸ªé…ç½®é¡¹ï¼‰
3. âœ… æœ¬åœ°APIç«¯ç‚¹é…ç½®
4. âœ… æœ¬åœ°æ¨¡åž‹é…ç½®
5. âœ… äº‘ç«¯APIç«¯ç‚¹é…ç½®
6. âœ… äº‘ç«¯æ¨¡åž‹é…ç½®
7. âœ… é…ç½®æ–‡ä»¶æœ¬åœ°APIè®¾ç½®
8. âœ… é…ç½®æ–‡ä»¶äº‘ç«¯APIè®¾ç½®
9. âœ… æœ¬åœ°APIè¿žæŽ¥æµ‹è¯•
10. âœ… ç›®æ ‡æ¨¡åž‹å¯ç”¨æ€§æ£€æŸ¥
11. âŒ é…ç½®APIç«¯ç‚¹æµ‹è¯•ï¼ˆéœ€è¦å¼€å‘æœåŠ¡å™¨ï¼‰

### APIåŠŸèƒ½æµ‹è¯•

å¯åŠ¨å¼€å‘æœåŠ¡å™¨åŽè¿›è¡Œçš„å®žé™…APIæµ‹è¯•ï¼š

#### 1. æ¨¡åž‹åˆ—è¡¨æ£€æŸ¥
```json
{
  "success": true,
  "data": {
    "localModels": ["deepseek-r1:8b"],
    "currentModel": "deepseek-r1:8b",
    "isAvailable": true,
    "error": null
  }
}
```

#### 2. æœ¬åœ°APIè¿žæŽ¥æµ‹è¯•
```json
{
  "success": true,
  "message": "æœ¬åœ°APIè¿žæŽ¥æµ‹è¯•æˆåŠŸ"
}
```

#### 3. äº‘ç«¯APIè¿žæŽ¥æµ‹è¯•
```json
{
  "success": false,
  "error": "äº‘ç«¯APIè¿žæŽ¥æµ‹è¯•å¤±è´¥: äº‘ç«¯APIå¯†é’¥æœªé…ç½®"
}
```
ï¼ˆè¿™æ˜¯é¢„æœŸç»“æžœï¼Œå› ä¸ºæ²¡æœ‰æä¾›çœŸå®žçš„APIå¯†é’¥ï¼‰

#### 4. é…ç½®çŠ¶æ€æŠ¥å‘Š
```json
{
  "success": true,
  "data": {
    "currentProvider": "local",
    "cloudStatus": {"available": true, "configured": true},
    "localStatus": {"available": true, "configured": true},
    "recommendations": []
  }
}
```

## è§£å†³çš„å…³é”®é—®é¢˜

### 1. æœ¬åœ°APIç«¯ç‚¹ä¿®å¤
- **ä¿®å¤å‰**: ä½¿ç”¨é”™è¯¯çš„äº‘ç«¯åœ°å€æˆ–ä¸æ­£ç¡®çš„æœ¬åœ°ç«¯ç‚¹
- **ä¿®å¤åŽ**: æ­£ç¡®ä½¿ç”¨ `http://localhost:11434/api/chat` ä½œä¸ºOllama APIç«¯ç‚¹

### 2. æ¨¡åž‹åç§°ä¿®å¤
- **ä¿®å¤å‰**: æœ¬åœ°ä½¿ç”¨ `deepseek-chat`ï¼Œä½†å®žé™…å¯ç”¨æ¨¡åž‹æ˜¯ `deepseek-r1:8b`
- **ä¿®å¤åŽ**: æœ¬åœ°ä½¿ç”¨ `deepseek-r1:8b`ï¼Œäº‘ç«¯ä½¿ç”¨ `deepseek-chat`

### 3. é…ç½®ç®¡ç†æ”¹è¿›
- **ä¿®å¤å‰**: é…ç½®å¯èƒ½ç¡¬ç¼–ç åœ¨ä»£ç ä¸­
- **ä¿®å¤åŽ**: æ‰€æœ‰é…ç½®é€šè¿‡ `.env.local` æ–‡ä»¶ç®¡ç†ï¼Œæ”¯æŒè¿è¡Œæ—¶è¦†ç›–

### 4. é”™è¯¯å¤„ç†å¢žå¼º
- å¢žåŠ äº†è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œæ˜Žç¡®æŒ‡å‡ºå¯ç”¨æ¨¡åž‹
- æ”¯æŒè‡ªåŠ¨æ£€æµ‹å’Œåˆ‡æ¢åˆ°å¯ç”¨æ¨¡åž‹
- æä¾›æ¸…æ™°çš„é…ç½®å»ºè®®

## æž¶æž„ä¼˜åŠ¿

### 1. æ··åˆæž¶æž„è®¾è®¡
- **äº‘ç«¯API**: ä½¿ç”¨DeepSeekå®˜æ–¹APIï¼Œé«˜æ€§èƒ½ã€é«˜è´¨é‡
- **æœ¬åœ°API**: ä½¿ç”¨Ollamaéƒ¨ç½²çš„æœ¬åœ°æ¨¡åž‹ï¼Œéšç§ä¿æŠ¤ã€æˆæœ¬æŽ§åˆ¶
- **æ™ºèƒ½åˆ‡æ¢**: æ ¹æ®å¯ç”¨æ€§è‡ªåŠ¨é€‰æ‹©æœ€ä½³æä¾›å•†

### 2. é…ç½®çµæ´»æ€§
- æ”¯æŒçŽ¯å¢ƒå˜é‡é…ç½®
- æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢
- æ”¯æŒè‡ªåŠ¨æ¨¡åž‹æ£€æµ‹å’Œé€‚é…

### 3. é”™è¯¯æ¢å¤æœºåˆ¶
- APIå¤±è´¥æ—¶è‡ªåŠ¨é™çº§
- æ¨¡åž‹ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å¯ç”¨æ¨¡åž‹
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œä¿®å¤å»ºè®®

## ä½¿ç”¨æŒ‡å—

### äº‘ç«¯APIé…ç½®
1. èŽ·å–DeepSeek APIå¯†é’¥
2. åœ¨ `.env.local` ä¸­è®¾ç½® `DEEPSEEK_API_KEY`
3. è®¾ç½® `DEEPSEEK_PROVIDER=cloud`

### æœ¬åœ°APIé…ç½®
1. å®‰è£…Ollama: `curl -fsSL https://ollama.ai/install.sh | sh`
2. ä¸‹è½½æ¨¡åž‹: `ollama pull deepseek-r1:8b`
3. å¯åŠ¨æœåŠ¡: `ollama serve`
4. è®¾ç½® `DEEPSEEK_PROVIDER=local`

### é…ç½®ä¸­å¿ƒä½¿ç”¨
è®¿é—® `http://localhost:3002/deepseek-config` è¿›è¡Œå¯è§†åŒ–é…ç½®ç®¡ç†ï¼š
- æŸ¥çœ‹å½“å‰é…ç½®çŠ¶æ€
- æµ‹è¯•APIè¿žæŽ¥
- åˆ‡æ¢APIæä¾›å•†
- æŸ¥çœ‹å¯ç”¨æ¨¡åž‹åˆ—è¡¨

## æ€§èƒ½ä¼˜åŒ–

### 1. è¶…æ—¶æ—¶é—´ä¼˜åŒ–
- å¥åº·æ£€æŸ¥: 15ç§’
- æ™®é€šè¯·æ±‚: 120ç§’
- æ–‡æ¡£åˆ†æž: 180ç§’ï¼ˆæœ¬åœ°APIï¼‰

### 2. ç¼“å­˜æœºåˆ¶
- é…ç½®ç®¡ç†å™¨å•ä¾‹æ¨¡å¼
- å®¢æˆ·ç«¯å®žä¾‹ç¼“å­˜
- æ”¯æŒå¼ºåˆ¶åˆ·æ–°

### 3. é”™è¯¯å¤„ç†
- æœ€å¤§é‡è¯•æ¬¡æ•°: 3æ¬¡
- æŒ‡æ•°é€€é¿ç®—æ³•
- è¯¦ç»†é”™è¯¯æ—¥å¿—

## æ€»ç»“

âœ… **ä¿®å¤å®Œæˆ**: DeepSeek APIé…ç½®é—®é¢˜å·²å®Œå…¨è§£å†³
âœ… **æµ‹è¯•é€šè¿‡**: 90.9%çš„æµ‹è¯•é€šè¿‡çŽ‡ï¼Œæ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨æ­£å¸¸
âœ… **åŠŸèƒ½å¢žå¼º**: æ”¯æŒäº‘ç«¯/æœ¬åœ°APIæ™ºèƒ½åˆ‡æ¢
âœ… **ç”¨æˆ·ä½“éªŒ**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å’Œé…ç½®æŒ‡å¯¼

ç”¨æˆ·çŽ°åœ¨å¯ä»¥ï¼š
1. ä½¿ç”¨æ­£ç¡®çš„æœ¬åœ°APIé…ç½®ï¼ˆdeepseek-r1:8bæ¨¡åž‹ï¼‰
2. ä½¿ç”¨æ­£ç¡®çš„äº‘ç«¯APIé…ç½®ï¼ˆdeepseek-chatæ¨¡åž‹ï¼‰
3. é€šè¿‡é…ç½®ä¸­å¿ƒè¿›è¡Œå¯è§†åŒ–ç®¡ç†
4. äº«å—äº‘ç«¯/æœ¬åœ°APIçš„æ™ºèƒ½åˆ‡æ¢åŠŸèƒ½

**å»ºè®®**: å¦‚éœ€ä½¿ç”¨äº‘ç«¯APIï¼Œè¯·åœ¨ `.env.local` ä¸­é…ç½®çœŸå®žçš„ `DEEPSEEK_API_KEY`ã€‚ 